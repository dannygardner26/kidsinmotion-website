<!DOCTYPE html>
<html>
<head>
    <title>Test Verification System</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>
<body>
    <h2>Kids in Motion - Test Verification System</h2>

    <div id="status">Loading...</div>

    <div id="authSection">
        <h3>Test Authentication</h3>
        <button onclick="testBackendConnection()">Test Backend Connection</button>
        <button onclick="testFirebaseAuth()">Test Firebase Auth</button>
    </div>

    <div id="results"></div>

    <script>
        // Firebase config (public config)
        const firebaseConfig = {
            apiKey: "AIzaSyC4AEjsYBQLhFWW1sV6_KbXQNZHJZEabUU",
            authDomain: "kids-in-motion-website-b1c09.firebaseapp.com",
            projectId: "kids-in-motion-website-b1c09",
            storageBucket: "kids-in-motion-website-b1c09.appspot.com",
            messagingSenderId: "839796180413",
            appId: "1:839796180413:web:b7a1f41253db31e8627ed4"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        function log(message) {
            const results = document.getElementById('results');
            results.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }

        async function testBackendConnection() {
            log('Testing backend connection...');
            try {
                const response = await fetch('https://kidsinmotion-website-839796180413.us-east4.run.app/api/health');
                if (response.ok) {
                    log('✅ Backend is responding');
                } else {
                    log('⚠️ Backend responded with status: ' + response.status);
                }
            } catch (error) {
                log('❌ Backend connection error: ' + error.message);
            }
        }

        async function testFirebaseAuth() {
            log('Testing Firebase authentication...');
            try {
                // Check if we can initialize auth
                log('Firebase Auth initialized: ' + (auth ? '✅' : '❌'));

                // Test anonymous auth (should work)
                const result = await auth.signInAnonymously();
                log('✅ Anonymous authentication successful');
                log('User ID: ' + result.user.uid);

                // Sign out
                await auth.signOut();
                log('✅ Sign out successful');
            } catch (error) {
                log('❌ Firebase auth error: ' + error.message);
            }
        }

        // Auto-run tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('status').textContent = 'Ready to test';
            log('Test page loaded successfully');
        });
    </script>
</body>
</html>